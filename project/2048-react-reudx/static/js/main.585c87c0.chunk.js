(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{13:function(e,r,t){e.exports=t(26)},24:function(e,r,t){},25:function(e,r,t){},26:function(e,r,t){"use strict";t.r(r);var n=t(0),o=t.n(n),a=t(7),c=t.n(a),i=t(6),s=t(5),u=t(1),l=t(2),f=t(4),p=t(3),b=function(){return o.a.createElement("div",{className:"title pull-left "},"2048-Lite")},m=function(e){Object(f.a)(t,e);var r=Object(p.a)(t);function t(){return Object(u.a)(this,t),r.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"score pull-left"},o.a.createElement("span",{className:"score-title"},"SCORE"),o.a.createElement("span",{className:"detail"},this.props.score))}}]),t}(n.Component);m.defaultProps={score:0};var d=function(e){Object(f.a)(t,e);var r=Object(p.a)(t);function t(){return Object(u.a)(this,t),r.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"score pull-left "},o.a.createElement("span",{className:"score-title"},"BEST"),o.a.createElement("span",{className:"detail"},this.props.bestScore))}}]),t}(n.Component);d.defaultProps={bestScore:0};var k=function(e){Object(f.a)(t,e);var r=Object(p.a)(t);function t(){return Object(u.a)(this,t),r.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"tips"},o.a.createElement("strong",null,this.props.mode),o.a.createElement("span",null,this.props.tip))}}]),t}(n.Component);k.defaultProps={mode:"Practice mode",tip:":you have option to undo your last move."};var h=function(e){Object(f.a)(t,e);var r=Object(p.a)(t);function t(){return Object(u.a)(this,t),r.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){var e=this.props.action,r=e.restart,t=e.undo;return o.a.createElement("div",{className:"button-group"},o.a.createElement("div",{className:"btn",onClick:r}," RESTART "),o.a.createElement("div",{className:"btn pull-right",onClick:t}," UNDO "))}}]),t}(n.Component),v=function(){return o.a.createElement("div",null)},O=function(e){Object(f.a)(t,e);var r=Object(p.a)(t);function t(){return Object(u.a)(this,t),r.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"header"},o.a.createElement(b,null),o.a.createElement(m,{score:this.props.score}),o.a.createElement(d,{bestScore:this.props.bestScore}),o.a.createElement(k,{mode:this.props.mode,tip:this.props.tip}),o.a.createElement(h,{action:{restart:this.props.restart,undo:this.props.undo}}),o.a.createElement(v,null))}}]),t}(n.Component),y=Object(s.b)((function(e){return{score:e.bricks.score,bestScore:e.bricks.bestScore,mode:e.main.mode,tip:e.main.tip}}),(function(e){return{restart:function(){e({type:"RESTART_GAME"})},undo:function(){e({type:"UNDO"})}}}))(O),E=function(e){Object(f.a)(t,e);var r=Object(p.a)(t);function t(e){var n;Object(u.a)(this,t);var o=(n=r.call(this,e)).props.deskWidth/n.props.brickNumberPerRow*.85,a=n.props.deskWidth/n.props.brickNumberPerRow*.85,c=n.props.deskWidth/n.props.brickNumberPerRow*.075;return n.state={style:{width:o,height:a,margin:c,lineHeight:a+"px"}},n}return Object(l.a)(t,[{key:"render",value:function(){var e=this,r={2:"4.25em",4:"4.25em",8:"4.25em",16:"3em",32:"3em",64:"3em",128:"2.75em",256:"2.75em",512:"2.75em",1024:"1.81em",2048:"1.81em"};return o.a.createElement("div",{className:"game-desk clearfix"},this.props.bricks.map((function(t){return t.map((function(t,n){return o.a.createElement(N,{key:n,style:Object.assign({},e.state.style,{fontSize:r[t],fontWeight:700}),value:t})}))})))}}]),t}(n.Component);E.defaultProps={bricks:new Array(4).fill([]).map((function(e){return new Array(4).fill(Math.pow(2,Math.floor(1+10*Math.random())))})),deskWidth:480,brickNumberPerRow:4};var N=function(e){Object(f.a)(t,e);var r=Object(p.a)(t);function t(){return Object(u.a)(this,t),r.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){var e="";return e=0!==this.props.value?"brick element-"+this.props.value:"brick",o.a.createElement("div",{className:e,style:this.props.style},0!==this.props.value?this.props.value:"")}}]),t}(n.Component),j=Object(s.b)((function(e){return{bricks:e.bricks.bricks,deskWidth:e.main.deskWidth,brickNumberPerRow:e.bricks.brickNumberPerRow}}),(function(e){return{restart:function(){e({type:"RESTART_GAME"})}}}))(E),w=(t(24),function(e){Object(f.a)(t,e);var r=Object(p.a)(t);function t(){return Object(u.a)(this,t),r.apply(this,arguments)}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",(function(r){var t=r.keyCode;87===t||38===t?e.props.move("up"):83===t||40===t?e.props.move("down"):65===t||37===t?e.props.move("left"):68!==t&&39!==t||e.props.move("right")}))}},{key:"componentDidUpdate",value:function(){this.props.gameOver&&window.confirm("\u6e38\u620f\u4f3c\u4e4e\u5df2\u7ed3\u675f\uff0c\u662f\u5426\u91cd\u65b0\u5f00\u59cb\uff1f")&&this.props.restart()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(y,null),o.a.createElement(j,null))}}]),t}(n.Component)),g=Object(s.b)((function(e){return{gameOver:e.bricks.gameOver}}),(function(e){return{move:function(r){e({type:"MOVE",pos:r})},restart:function(){e({type:"RESTART_GAME"})}}}))(w);function R(e,r){do{var t=Math.floor(Math.random()*r),n=Math.floor(Math.random()*r)}while(0!==e[t][n]);var o=Math.floor(10*Math.random()+1);return e[t][n]=o<7?2:4,e}function P(e,r,t,n){var o,a,c,i,s=M(r),u=(i=e,JSON.parse(JSON.stringify(i))),l=!1;switch(t){case"up":if(8&n)for(o=0;o<r;o++){for(a=0,c=0;a<r;a++)s[c][o]=u[a][o]?(c++,u[a][o]):0;for(a=0;a<r-1;a++)s[a][o]===s[a+1][o]&&s[a][o]&&(s[a][o]*=2,s[a+1][o]=0);for(a=0,c=0;a<r;a++)u[a][o]=0,u[c][o]=s[a][o]?(c++,s[a][o]):0;l=!0}break;case"down":if(4&n){for(o=0;o<r;o++){for(a=r-1,c=r-1;a>=0;a--)s[c][o]=u[a][o]?(c--,u[a][o]):0;for(a=r-1;a>0;a--)s[a][o]===s[a-1][o]&&s[a][o]&&(s[a][o]*=2,s[a-1][o]=0);for(a=r-1,c=r-1;a>=0;a--)u[a][o]=0,u[c][o]=s[a][o]?(c--,s[a][o]):0}l=!0}break;case"left":if(2&n){for(o=0;o<r;o++){for(a=0,c=0;a<r;a++)s[o][c]=u[o][a]?(c++,u[o][a]):0;for(a=0;a<r-1;a++)s[o][a]===s[o][a+1]&&s[o][a]&&(s[o][a]*=2,s[o][a+1]=0);for(a=0,c=0;a<r;a++)u[o][a]=0,u[o][c]=s[o][a]?(c++,s[o][a]):0}l=!0}break;case"right":if(1&n){for(o=0;o<r;o++){for(a=r-1,c=r-1;a>=0;a--)s[o][c]=u[o][a]?(c--,u[o][a]):0;for(a=r-1;a>0;a--)s[o][a]===s[o][a-1]&&s[o][a]&&(s[o][a]*=2,s[o][a-1]=0);for(a=r-1,c=r-1;a>=0;a--)u[o][a]=0,u[o][c]=s[o][a]?(c--,s[o][a]):0}l=!0}}return l?R(u,r):u}function S(e,r,t){var n,o,a,c=0,i=M(r),s=M(r),u=!0;switch(t){case"up":for(n=0;n<r;n++){for(o=0,a=0;o<r;o++)i[a][n]=e[o][n]?(a++,e[o][n]):0;for(o=0;o<r-1;o++)i[o][n]===i[o+1][n]&&i[o][n]&&(i[o][n]*=2,i[o+1][n]=0);for(o=0,a=0;o<r;o++)s[o][n]=0,s[a][n]=i[o][n]?(a++,i[o][n]):0;for(o=0;o<r;o++)u=u&&s[o][n]===e[o][n];if(!u){c|=8;break}}break;case"down":for(n=0;n<r;n++){for(o=r-1,a=r-1;o>=0;o--)i[a][n]=e[o][n]?(a--,e[o][n]):0;for(o=r-1;o>0;o--)i[o][n]===i[o-1][n]&&i[o][n]&&(i[o][n]*=2,i[o-1][n]=0);for(o=r-1,a=r-1;o>=0;o--)s[o][n]=0,s[a][n]=i[o][n]?(a--,i[o][n]):0;for(o=0;o<r;o++)u=u&&s[o][n]===e[o][n];if(!u){c|=4;break}}break;case"left":for(n=0;n<r;n++){for(o=0,a=0;o<r;o++)i[n][a]=e[n][o]?(a++,e[n][o]):0;for(o=0;o<r-1;o++)i[n][o]===i[n][o+1]&&i[n][o]&&(i[n][o]*=2,i[n][o+1]=0);for(o=0,a=0;o<r;o++)s[n][o]=0,s[n][a]=i[n][o]?(a++,i[n][o]):0;for(o=0;o<r;o++)u=u&&s[n][o]===e[n][o];if(!u){c|=2;break}}break;case"right":for(n=0;n<r;n++){for(o=r-1,a=r-1;o>=0;o--)i[n][a]=e[n][o]?(a--,e[n][o]):0;for(o=r-1;o>0;o--)i[n][o]===i[n][o-1]&&i[n][o]&&(i[n][o]*=2,i[n][o-1]=0);for(o=r-1,a=r-1;o>=0;o--)s[n][o]=0,s[n][o]=i[n][o]?(a--,i[n][o]):0;for(o=0;o<r;o++)u=u&&s[n][o]===e[n][o];if(!u){c|=1;break}}}return c}function A(e,r,t){if(t)return t;for(var n=0;n<r;n++)if(e[n].some((function(e,r,t){return 0===e})))return!1;for(n=0;n<r;n++){for(var o=0;o<r-1;o++)if(e[n][o]===e[n][o+1])return!1;for(o=0;o<r-1;o++)if(e[o][n]===e[o+1][n])return!1}return!0}function M(e){return new Array(e).fill([]).map((function(r){return new Array(e).fill(0)}))}var T=Object(i.b)({bricks:function(){var e,r,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{bricks:[],brickNumberPerRow:4,undoBricks:[],gameOver:!1,score:0,bestScore:0},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"INIT_GAME":return e=R(e=new Array(4).fill([]).map((function(e){return new Array(n.brickNumberPerRow).fill(0)})),n.brickNumberPerRow),e=R(e,n.brickNumberPerRow),Object.assign({},t,{bricks:e,undoBricks:[],brickNumberPerRow:n.brickNumberPerRow});case"RESTART_GAME":return e=R(e=new Array(4).fill([]).map((function(e){return new Array(t.brickNumberPerRow).fill(0)})),t.brickNumberPerRow),e=R(e,t.brickNumberPerRow),Object.assign({},t,{bricks:e,score:0,bestScore:Math.max(t.score,t.bestScore)});case"GENERATE_BRICK":return r=R(JSON.parse(JSON.stringify(t.bricks)),t.brickNumberPerRow),t.undoBricks.push(JSON.stringify(t.bricks)),Object.assign({},t,{bricks:r});case"UNDO":return(r=JSON.parse(t.undoBricks.pop()))?Object.assign({},t,{bricks:r,undoBricks:t.undoBricks.slice(0),score:r.map((function(e){return e.reduce((function(e,r){return e+r}))})).reduce((function(e,r){return e+r}))}):t;case"MOVE":var o=S(t.bricks,t.brickNumberPerRow,n.pos);return r=P(t.bricks,t.brickNumberPerRow,n.pos,o),Object.assign({},t,{bricks:r,gameOver:A(t.bricks,t.brickNumberPerRow,t.gameOver),score:r.map((function(e){return e.reduce((function(e,r){return e+r}))})).reduce((function(e,r){return e+r})),undoBricks:t.undoBricks.concat(JSON.stringify(t.bricks))});default:return t}},main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"INIT_GAME":return Object.assign({},e,{tip:":you have option to undo your last move.",mode:"Practice mode",deskWidth:480});default:return e}}}),C=(t(25),Object(i.c)(T));C.dispatch({type:"INIT_GAME",brickNumberPerRow:4}),c.a.render(o.a.createElement(s.a,{store:C},o.a.createElement(g,null)),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.585c87c0.chunk.js.map